---
title: 'Lync Server 2013: 단일 내부 풀에 대한 웹 게시 규칙 구성'
TOCTitle: 단일 내부 풀에 대한 웹 게시 규칙 구성
ms:assetid: 86ff4b2a-1ba9-46a2-a175-8b19e00a49dd
ms:mtpsurl: https://technet.microsoft.com/ko-kr/library/Gg429712(v=OCS.15)
ms:contentKeyID: 49304277
ms.date: 08/24/2015
mtps_version: v=OCS.15
ms.translationtype: HT
---

# Lync Server 2013에서 단일 내부 풀에 대한 웹 게시 규칙 구성

 

_**마지막으로 수정된 항목:** 2014-07-07_

Microsoft Forefront Threat Management Gateway 2010 및 IIS ARR(Internet Information Server Application Request Routing)은 웹 게시 규칙을 사용하여 모임 URL 등의 내부 리소스를 인터넷의 사용자에게 게시합니다.

가상 디렉터리에 대한 웹 서비스 URL 외에 단순 URL에 대한 게시 규칙도 만들어야 합니다. 각 단순 URL, LyncDiscover URL 및 Office Web Apps 서버에 대해 해당 단순 URL을 가리키는 역방향 프록시에 대한 개별 규칙을 만들어야 합니다.

모바일 기능을 배포하며 자동 검색을 사용하는 경우에는 외부 자동 검색 서비스 URL에 대해 게시 규칙을 만들어야 합니다. 또한 자동 검색을 사용하려면 디렉터 풀 및 프런트 엔드 풀의 외부 Lync Server 웹 서비스 URL에 대한 게시 규칙도 필요합니다. 자동 검색용으로 웹 게시 규칙을 만드는 방법에 대한 자세한 내용은 [Lync Server 2013에서 모바일 기능에 대해 역방향 프록시 구성](lync-server-2013-configuring-the-reverse-proxy-for-mobility.md)을 참고하세요.

웹 게시 규칙을 만들려면 다음 절차를 사용합니다.


> [!NOTE]
> 이러한 절차에서는 Forefront Threat Management Gateway(TMG) 2010의 Standard Edition이 설치되어 있거나 IIS ARR(Internet Information Server with the Application request Routing) 확장 프로그램을 설치 및 구성했다고 가정합니다. TMG 또는 IIS ARR 중 하나를 사용합니다.



## TMG 2010을 실행 중인 컴퓨터에 웹 서버 게시 규칙을 만들려면

1.  **시작** 을 클릭하고 **프로그램** , **Microsoft Forefront TMG** 를 차례로 선택한 다음 **Forefront TMG 관리** 를 클릭합니다.

2.  왼쪽 창에서 **ServerName** 을 확장하고 **방화벽 정책** 을 마우스 오른쪽 단추로 클릭하고 **새로 만들기** 를 선택한 다음 **웹 사이트 게시 규칙** 을 클릭합니다.

3.  **새 웹 게시 규칙 시작** 페이지에서 게시 규칙의 표시 이름(예: LyncServerWebDownloadsRule)을 입력합니다.

4.  **규칙 동작 선택** 페이지에서 **허용** 을 선택합니다.

5.  **게시 유형** 페이지에서 **단일 웹 사이트 또는 부하 분산 장치 게시** 를 선택합니다.

6.  **서버 연결 보안** 페이지에서 **SSL을 사용하여 게시된 웹 서버 또는 서버 팜에 연결** 을 선택합니다.

7.  **내부 게시 정보** 페이지에서 **내부 사이트 이름** 상자에 모임 콘텐츠와 주소록 콘텐츠를 호스팅하는 내부 웹 팜의 FQDN(정규화된 도메인 이름)을 입력합니다.
    

    > [!NOTE]
    > 내부 서버가 Standard Edition 서버이면 이 FQDN은 Standard Edition 서버 FQDN입니다. 내부 서버가 프런트 엔드 풀이면 이 FQDN은 내부 웹 팜 서버의 부하를 분산하는 하드웨어 부하 분산 장치 VIP(가상 IP)입니다. TMG 서버는 FQDN을 내부 웹 서버의 IP 주소로 확인할 수 있어야 합니다. TMG 서버가 FQDN을 적합한 IP 주소로 확인할 수 없으면 <STRONG>컴퓨터 이름 또는 IP 주소를 사용하여 게시된 서버에 연결</STRONG> 을 선택한 다음 <STRONG>컴퓨터 이름 또는</STRONG> <STRONG>IP 주소</STRONG> 상자에 내부 웹 서버의 IP 주소를 입력할 수 있습니다. 이렇게 하려면 TMG 서버에서 포트 53이 열려 있어 경계 네트워크에 있는 DNS 서버에 연결할 수 있어야 합니다. 로컬 호스트 파일의 항목을 사용하여 이름을 확인할 수도 있습니다.



8.  **내부 게시 정보** 페이지의 **경로(옵션)** 상자에 게시할 폴더의 경로를 **/\*** 로 입력합니다.
    

    > [!NOTE]
    > 웹 사이트 게시 마법사에서는 하나의 경로만 지정할 수 있습니다. 추가 경로는 규칙의 속성을 수정하여 추가할 수 있습니다.



9.  **공개 이름 정보** 페이지에서 **다음에 대한 요청 허용** 아래에 **이 도메인 이름** 이 선택되었는지 확인하고 **공개 이름** 상자에 외부 웹 서비스 FQDN을 입력합니다.

10. **웹 수신기 선택** 페이지에서 **새로 만들기** 를 클릭하여 새 웹 수신기 정의 마법사를 엽니다.

11. **새 웹 수신기 마법사 시작** 페이지에서 **웹 수신기 이름** 상자에 웹 수신기의 이름(예: LyncServerWebServers)을 입력합니다.

12. **클라이언트 연결 보안** 페이지에서 **클라이언트와의 SSL 보안 연결 필요** 를 선택합니다.

13. **웹 수신기 IP 주소** 페이지에서 **외부** 를 선택한 다음 **IP 주소 선택** 을 클릭합니다.

14. **외부 수신기 IP 선택** 페이지에서 **선택한 네트워크에 있는 Forefront TMG 컴퓨터의 지정한 IP 주소** 를 선택하고 해당하는 IP 주소를 선택한 다음 **추가** 를 클릭합니다.

15. **수신기 SSL 인증서** 페이지에서 **각 IP 주소에 인증서 할당** 을 선택하고 외부 웹 FQDN과 연결되어 있는 IP 주소를 선택한 다음 **인증서 선택** 을 클릭합니다.

16. **인증서 선택** 페이지에서 9단계에서 지정한 공용 이름과 일치하는 인증서를 선택하고 **선택** 을 클릭합니다.

17. **인증 설정** 페이지에서 **인증 없음** 을 선택합니다.

18. **Single Sign On 설정** 페이지에서 **다음** 을 클릭합니다.

19. **웹 수신기 마법사 완료** 페이지에서 **웹 수신기** 설정이 올바른지 확인한 다음 **마침** 을 클릭합니다.

20. **인증 위임** 페이지에서 **위임 안 함 - 클라이언트에서 직접 인증** 을 선택합니다.

21. **사용자 집합** 페이지에서 **다음** 을 클릭합니다.

22. **새 웹 게시 규칙 마법사 완료** 페이지에서 웹 게시 규칙 설정이 올바른지 확인한 다음 **마침** 을 클릭합니다.

23. 세부 정보 창에서 **적용** 을 클릭하여 변경 내용을 저장하고 구성을 업데이트합니다.

## IIS ARR을 실행하는 컴퓨터에서 웹 서버 게시 규칙을 만들려면

1.  HTTPS 프로토콜에 대한 역방향 프록시에 사용할 인증서를 바인딩합니다. **시작** 을 클릭하고 **프로그램** , **관리 도구** 를 선택한 다음 **IIS(인터넷 정보 서비스) 관리자** 를 클릭합니다.
    

    > [!NOTE]
    > IIS ARR의 배포와 구성에 대한 추가 도움말, 스크린샷 및 지침은 NextHop 문서( <A href="http://go.microsoft.com/fwlink/?linkid=293391">Lync Server 2013의 역방향 프록시로 IIS ARR 사용(영어)</A>)에서 찾을 수 있습니다.



2.  아직 실행하지 않은 경우 역방향 프록시에 사용할 인증서를 가져옵니다. **IIS(인터넷 정보 서비스) 관리자** 에서 콘솔의 왼쪽에 있는 역방향 프록시 서버 이름을 클릭합니다. **IIS** 의 콘솔 중간에서 **서버 인증서** 를 찾습니다. **서버 인증서** 를 마우스 오른쪽 단추로 클릭하고 **기능 열기** 를 선택합니다.

3.  콘솔의 오른쪽에서 **가져오기…** 를 클릭합니다. 인증서 경로와 파일 이름을 확장명과 함께 입력하거나 **…** 를 클릭해 인증서를 찾습니다. 인증서를 선택하고 **열기** 를 클릭합니다. 개인 키를 보호하는 데 사용하는 암호를 입력합니다(인증서와 개인 키를 내보낼 때 암호를 지정한 경우). **확인** 을 클릭합니다. 인증서 가져오기가 성공적으로 완료되면 인증서가 콘솔 중간에 있는 **서버 인증서** 에 항목으로 표시됩니다.

4.  HTTPS에서 사용할 인증서를 할당합니다. 콘솔 왼쪽에서 IIS 서버의 **기본 웹 사이트** 를 선택합니다. 오른쪽에서 **바인딩…** 을 클릭합니다. **사이트 바인딩** 대화 상자에서 **추가…** 를 클릭합니다. **사이트 바인딩 추가** 대화 상자의 **유형:** 에서 **https** 를 선택합니다. https를 선택하면 https에 사용할 인증서를 선택할 수 있습니다. **SSL 인증서:** 에서 역방향 프록시용으로 가져온 인증서를 선택합니다. **확인** 을 클릭한 후 **닫기** 를 클릭합니다. 이제 인증서가 SSL(Secure Socket Layer) 및 TLS(전송 계층 보안)에 대한 역방향 프록시로 바인딩됩니다.
    

    > [!IMPORTANT]
    > 바인딩 대화 상자를 닫을 때 중간 인증서가 누락되었다는 경고 메시지가 나타나면 공용 CA 루트 인증 기관 인증서와 중간 CA 인증서를 찾아서 가져와야 합니다. 인증서를 요청한 공용 CA에서 지침을 참고하고 지침에 따라 인증서 체인을 요청해 가져옵니다. 에지 서버에서 인증서를 내보낸 경우 루트 CA 인증서 및 에지 서버와 연결된 중간 CA 인증서를 내보낼 수 있습니다. CA 인증서는 컴퓨터(사용자 저장소와 혼동해서는 안 됨)의 신뢰할 수 있는 루트 인증 기관 저장소로 가져오고, 중간 인증서는 컴퓨터의 중간 인증 기관 저장소로 가져옵니다.



5.  콘솔 왼쪽, IIS 서버 이름 아래에서 **서버 팜** 을 마우스 오른쪽 단추로 클릭한 후 **서버 팜 만들기…** 를 클릭합니다.
    

    > [!NOTE]
    > <STRONG>서버 팜</STRONG> 노드가 표시되지 않으면 Application Request Routing을 설치해야 합니다. 자세한 내용은 <A href="lync-server-2013-setting-up-reverse-proxy-servers.md">Lync Server 2013에 대한 역방향 프록시 서버 설치</A>을 참고하세요.

    
    **서버 팜 이름** 의 **서버 팜 만들기** 대화 상자에 첫 번째 URL에 대한 이름(쉽게 알아볼 수 있는 이름을 사용할 수 있음)을 입력합니다. **다음** 을 클릭합니다.

6.  **서버 주소** 의 **서버 추가** 대화 상자에 프런트 엔드 서버에 있는 외부 웹 서비스의 FQDN(정규화된 도메인 이름)을 입력합니다. 여기에서 예시로 사용되는 이름은 역방향 프록시의 계획 섹션( [Lync Server 2013의 인증서 요약 - 역방향 프록시](lync-server-2013-certificate-summary-reverse-proxy.md))에서 사용되는 이름과 같습니다. 역방향 프록시 계획을 참조하여 FQDN `webext.contoso.com`을 입력합니다. **온라인** 옆의 확인란이 선택되어 있는지 확인합니다. **추가** 를 클릭하여 이 구성에 대한 웹 서버의 풀에 서버를 추가합니다.
    

    > [!WARNING]
    > Lync Server에서는 하드웨어 부하 분산 장치를 사용하여 HTTP 및 HTTPS 트래픽에 대한 디렉터 및 프런트 엔드 서버를 풀링합니다. IIS ARR 서버 팜에 서버를 추가할 때 FQDN을 하나만 제공하면 됩니다. FQDN은 풀링되지 않은 서버 구성에서 프런트 엔드 서버 또는 디렉터가 되거나 서버 풀을 위해 구성된 하드웨어 부하 분산 장치의 FQDN이 됩니다. HTTP 및 HTTPS 트래픽의 부하를 분산하기 위해 유일하게 지원되는 방법은 하드웨어 부하 분산 장치를 사용하는 것입니다.



7.  **서버 추가** 대화 상자에서 **고급 설정…** 을 클릭합니다. 그러면 구성된 FQDN 요청에 대한 응용 프로그램 요청 라우팅을 정의할 수 있는 대화 상자가 열립니다. 여기서는 IIS ARR이 요청을 처리할 때 사용할 포트를 다시 정의하는 것이 목적입니다.
    
    기본적으로 대상 HTTP 포트는 8080으로 정의해야 합니다. 현재 **httpPort 80** 옆을 클릭하고 값을 **8080** 으로 설정합니다. 현재 **httpsPort 443** 옆을 클릭하고 값을 **4443** 으로 설정합니다. **weight** 매개 변수를 100으로 유지합니다. 필요에 따라 초기 계획 통계가 준비되었으면 지정된 규칙에 대한 가중치를 다시 정의할 수 있습니다. **마침** 을 클릭하여 규칙 구성 과정을 완료합니다.

8.  IIS 관리자가 URL 재작성 규칙을 만들어 모든 수신 요청을 서버 팜에 자동으로 연결할 수 있음을 알려 주는 '다시 쓰기 규칙' 대화 상자가 나타날 수 있습니다. **예** 를 클릭합니다. 수동으로 규칙을 조정하는 중에 '예'를 선택하면 초기 구성이 설정됩니다.

9.  방금 만든 서버 팜의 이름을 클릭합니다. 'IIS 관리자 기능 보기'의 **서버 팜** 에서 **캐싱** 을 두 번 클릭합니다. **디스크 캐시 사용** 을 선택 취소합니다. 오른쪽에서 **적용** 을 클릭합니다.

10. 서버 팜 이름을 클릭합니다. 'IIS 관리자 기능 보기'의 **서버 팜**에서 **프록시**를 두 번 클릭합니다. 프록시 설정 페이지에서 **시간 제한(초)** 값을 배포에 해당하는 값으로 변경합니다. **적용**을 클릭하여 변경 내용을 저장합니다.
    

    > [!IMPORTANT]
    > 프록시 시간 제한 값은 배포마다 달라집니다. 배포를 모니터링하고 최상의 클라이언트 환경을 위해 값을 수정해야 합니다. 값을 200 정도로 낮게 설정할 수도 있습니다. 사용자 환경에서 Lync 모바일 클라이언트를 지원하는 경우, 값을 960으로 설정하여 시간 제한 값이 900인 Office 365의 푸시 알림 시간 제한을 허용하도록 합니다. 시간 제한 값이 너무 낮아 클라이언트 연결이 끊기는 현상을 방지하려면 시간 제한 값을 늘리거나, 클라이언트 연결이 끊긴 후에도 프록시를 통한 연결이 끊기지 않고 오래 지속되는 경우 값을 줄여야 합니다. 올바른 설정 값을 결정하는 유일하고 정확한 방법은 자신의 환경에 어떤 것이 정상적인지 모니터링하고 초기 계획을 세우는 것입니다



11. 서버 팜 이름을 클릭합니다. 'IIS 관리자 기능 보기'의 **서버 팜** 에서 **라우팅 규칙** 을 두 번 클릭합니다. '라우팅'의 '라우팅 규칙' 대화 상자에서 'SSL 오프로딩 사용' 옆에 있는 확인란의 선택을 취소합니다. 확인란의 선택을 취소할 수 없는 경우 **URL 재작성을 사용해 들어오는 요청 검사** 확인란을 선택합니다. **적용** 을 클릭하여 변경 내용을 저장합니다.
    

    > [!WARNING]
    > 역방향 프록시에 의한 SSL 오프로딩은 지원되지 않습니다.



12. 역방향 프록시를 통과해야 하는 각 URL에 대해 5-11단계를 반복합니다. 일반 목록은 다음과 같습니다.
    
      - 프런트 엔드 서버 웹 서비스 외부: webext.contoso.com(초기 단계에서 이미 구성됨)
    
      - 디렉터용 디렉터 웹 서비스 외부: webdirext.contoso.com( 디렉터가 배포된 경우 선택 사항)
    
      - 단순 URL 모임: meet.contoso.com
    
      - 단순 URL 전화 접속: dialin.contoso.com
    
      - Lync 자동 검색 URL: lyncdiscover.contoso.com
    
      - Office Web Apps 서버 URL: officewebapps01.contoso.com
        

        > [!IMPORTANT]
        > Office Web Apps 서버의 URL은 다른 httpsPort 주소를 사용합니다. 7단계에서 <STRONG>httpsPort</STRONG> 를 <STRONG>443</STRONG> 으로 설정하고 <STRONG>httpPort</STRONG> 를 포트 <STRONG>80</STRONG> 으로 설정합니다. 다른 모든 구성 설정은 동일합니다.



13. 콘솔 왼쪽에서 IIS 서버 이름을 클릭합니다. 콘솔 중간의 **IIS** 아래에서 **URL 재작성** 을 찾습니다. 'URL 재작성'을 두 번 클릭해 'URL 재작성 규칙 구성'을 엽니다. 그러면 이전 단계에서 만든 각 서버 팜의 규칙이 표시됩니다. 만일 표시되지 않으면 Internet Information Server Manager 콘솔의 **시작 페이지** 노드 바로 아래에서 **IIS 서버** 를 클릭했는지 확인합니다.

14. **URL 재작성** 대화 상자에서 webext.contoso.com을 예로 사용해 표시되는 규칙의 전체 이름은 **ARR\_webext.contoso.com\_loadbalance\_SSL** 입니다.
    
      - 규칙을 두 번 클릭해 **인바운드 규칙 편집** 대화 상자를 엽니다.
    
      - **조건** 대화 상자에서 **추가...** 를 클릭합니다.
    
      - **조건 입력:** 의 **조건 추가** 에 **{HTTP\_HOST}** 를 입력합니다(입력하는 동안 조건을 선택할 수 있는 대화 상자가 나타남). **입력 문자열 여부 확인:** 에서 **다음 패턴과 일치** 를 선택합니다. **패턴 입력** 에 **\*** 를 입력합니다. **대/소문자 무시** 를 선택합니다. **확인** 을 클릭합니다.
    
      - **인바운드 규칙 편집** 대화 상자에서 아래로 스크롤해 **작업** 대화 상자를 찾습니다. **작업 유형:** 은 **서버 팜으로 라우팅** 으로, **구성표:** 는 **https://** 로, **서버 팜:** 은 이 규칙이 적용되는 URL로 설정되어 있어야 합니다. 이 예에서는 **webext.contoso.com** 으로 설정되어 있어야 합니다. **경로:** 는 **/{R:0}** 으로 설정됩니다.
    
      - **적용** 을 클릭해 변경 내용을 저장합니다. URL 재작성 규칙으로 돌아가려면 **규칙으로 돌아가기** 를 클릭합니다.

15. 정의한 SSL 다시 쓰기 규칙 각각에 대해 서버 팜 URL당 하나씩 14단계에서 정의한 절차를 반복합니다.
    

    > [!WARNING]
    > 기본적으로 HTTP 규칙도 만들어지며 SSL 규칙과 비슷한 이름으로 표시됩니다. 이 예에서 HTTP 규칙의 이름은 <STRONG>ARR_webext.contoso.com_loadbalance</STRONG> 입니다. 이 규칙은 수정이 필요하지 않으며 무시해도 됩니다.



## TMG 2010에서 웹 게시 규칙 속성을 수정하려면

1.  **시작** 을 클릭하고 **프로그램** 을 가리키고 **Microsoft Forefront TMG** 를 선택한 다음 **Forefront TMG 관리** 를 클릭합니다.

2.  왼쪽 창에서 **ServerName** 을 확장한 다음 **방화벽 정책** 을 클릭합니다.

3.  세부 정보 창에서 이전 절차에서 만든 웹 서버 게시 규칙(예: LyncServerExternalRule)을 마우스 오른쪽 단추로 클릭한 다음 **속성** 을 클릭합니다.

4.  **속성** 페이지의 **시작** 탭에서 다음을 수행합니다.
    
      - **이 규칙은 다음 원본에서 생성된 트래픽에 적용됩니다** 목록에서 **원하는 위치** 를 클릭한 다음 **제거** 를 클릭합니다.
    
      - **추가** 를 클릭합니다.
    
      - **네트워크 엔터티 추가** 에서 **네트워크** 를 확장하고 **외부** , **추가** 를 차례로 클릭한 다음 **닫기** 를 클릭합니다.

5.  **종료** 탭에서 **실제 호스트 헤더 대신 원래 호스트 헤더 전달** 확인란이 선택되어 있는지 확인합니다.

6.  **브리징** 탭에서 **SSL 포트로 요청 리디렉션** 확인란을 선택한 다음 포트 **4443** 을 지정합니다.

7.  **공개 이름** 탭에서 단순 URL(예: meet.contoso.com 및 dialin.contoso.com)을 추가합니다.

8.  **적용** 을 클릭하여 변경 내용을 저장한 다음 **확인** 을 클릭합니다.

9.  세부 정보 창에서 **적용** 을 클릭하여 변경 내용을 저장하고 구성을 업데이트합니다.

## IIS ARR에서 웹 게시 규칙의 속성을 수정하려면

1.  **시작** 을 클릭하고 **프로그램** , **관리 도구** 를 선택한 다음 **IIS(인터넷 정보 서비스) 관리자** 를 클릭합니다.

2.  콘솔의 왼쪽에서 IIS 서버 이름을 클릭합니다.

3.  콘솔 중간의 **IIS** 아래에서 **URL 재작성** 을 찾습니다. 'URL 재작성'을 두 번 클릭해 'URL 재작성 규칙 구성'을 엽니다.

4.  수정할 규칙을 두 번 클릭합니다. **URL 일치** , **조건** , **서버 변수** 또는 **작업** 에서 필요한 내용을 수정합니다.

5.  **적용** 을 클릭해 변경 내용을 커밋합니다. **규칙으로 돌아가기** 를 클릭해 다른 규칙을 수정하거나 변경 작업을 마쳤으면 **IIS 관리자** 콘솔을 닫습니다.

